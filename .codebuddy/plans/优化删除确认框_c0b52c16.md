---
name: 优化删除确认框
overview: 使用 shadcn/ui 的 AlertDialog 组件替换原生 confirm，创建可复用的确认对话框组件，并更新所有管理页面
todos:
  - id: create-confirm-dialog
    content: 创建 ConfirmDialog 组件和 useConfirm Hook
    status: completed
  - id: update-posts-page
    content: 替换 posts/page.tsx 中的 confirm()
    status: completed
    dependencies:
      - create-confirm-dialog
  - id: update-posts-id-page
    content: 替换 posts/[id]/page.tsx 中的 confirm()
    status: completed
    dependencies:
      - create-confirm-dialog
  - id: update-categories-page
    content: 替换 categories/page.tsx 中的 confirm()
    status: completed
    dependencies:
      - create-confirm-dialog
  - id: update-tags-page
    content: 替换 tags/page.tsx 中的 confirm()
    status: completed
    dependencies:
      - create-confirm-dialog
  - id: update-media-page
    content: 替换 media/page.tsx 中的 confirm()
    status: completed
    dependencies:
      - create-confirm-dialog
  - id: update-links-page
    content: 替换 links/page.tsx 中的 confirm()
    status: completed
    dependencies:
      - create-confirm-dialog
---

## 用户需求

将后台管理系统的删除确认框从原生 `confirm()` 替换为自定义确认弹窗组件，与整体 glassmorphism UI 设计风格保持一致。

## 需要修改的页面

共 6 个页面使用了原生 confirm()：

- 文章列表页 (`posts/page.tsx`)
- 文章编辑页 (`posts/[id]/page.tsx`)
- 分类管理页 (`categories/page.tsx`)
- 标签管理页 (`tags/page.tsx`)
- 媒体库页 (`media/page.tsx`)
- 友链管理页 (`links/page.tsx`)

## 视觉效果

自定义确认弹窗采用 glassmorphism 风格，与项目现有的 glass 类样式一致，包含：

- 毛玻璃背景效果
- 樱花粉主题配色
- framer-motion 动画效果
- 警告图标和确认/取消按钮

## 技术栈

- React 19 + TypeScript
- framer-motion 动画库
- lucide-react 图标库
- Tailwind CSS + glassmorphism 样式

## 实现方案

### 组件设计

创建 `ConfirmDialog` 组件和 `useConfirm` Hook，采用声明式 API：

```typescript
const { showConfirm, confirmDialog } = useConfirm();

// 使用方式
const confirmed = await showConfirm('确定要删除这篇文章吗？');
if (confirmed) {
  // 执行删除
}

// 在 JSX 中渲染
{confirmDialog}
```

### 优势

- 统一的视觉风格
- 可复用的 Hook 模式
- 最小化代码改动
- 支持 Promise 异步确认

## 目录结构

```
admin/src/
├── components/
│   └── ui/
│       └── confirm-dialog.tsx  # [NEW] 确认弹窗组件和 useConfirm Hook
└── app/
    ├── posts/
    │   ├── page.tsx            # [MODIFY] 替换 confirm()
    │   └── [id]/page.tsx       # [MODIFY] 替换 confirm()
    ├── categories/page.tsx     # [MODIFY] 替换 confirm()
    ├── tags/page.tsx           # [MODIFY] 替换 confirm()
    ├── media/page.tsx          # [MODIFY] 替换 confirm()
    └── links/page.tsx          # [MODIFY] 替换 confirm()
```